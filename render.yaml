# Render.com infrastructure-as-code example for this repo.
# Fill the placeholders (values with <...>) before using, or use the Render dashboard UI.
# NOTE: Render's schema may evolve; treat this as a helpful template rather than a guaranteed-to-apply manifest.

services:
  - type: web
    name: phorn-bus-web
    env: docker
    repo: phornnato/phorn-bus-system
    branch: main
    dockerfilePath: Dockerfile
    # Leave buildCommand/startCommand empty to use Dockerfile defaults (our Dockerfile runs /start.sh)
    buildCommand: ""
    startCommand: ""
    plan: starter
  region: oregon
    envVars:
      # Replace placeholders below with your real secrets/values in the Render dashboard or here.
      - key: APP_ENV
        value: production
      - key: APP_DEBUG
        value: "false"
      - key: APP_URL
        value: https://phorn-bus-system.onrender.com
      # Do NOT commit APP_KEY or any secrets to the repo. Set them in Render UI.
      - key: APP_KEY
        value: <set-in-render>
      - key: DB_CONNECTION
        value: <postgres|mysql>
      - key: DB_HOST
        value: <db-host>
      - key: DB_PORT
        value: "<db-port>"
      - key: DB_DATABASE
        value: <db-name>
      - key: DB_USERNAME
        value: <db-user>
      - key: DB_PASSWORD
        value: <db-password>
      - key: REDIS_HOST
        value: <redis-host-if-any>
      - key: MAIL_MAILER
        value: smtp

# Optional: add a background worker service for queue processing
  - type: worker
    name: phorn-bus-worker
    env: docker
    repo: phornnato/phorn-bus-system
    branch: main
    dockerfilePath: Dockerfile
    startCommand: php artisan queue:work --sleep=3 --tries=3
    plan: starter
    region: oregon
    envVars:
      - key: APP_ENV
        value: production
      - key: APP_KEY
        value: base64:ZaFen9MuHb+g+DM6K2ZB3ZxkaYw7564JfSC8ql2pjZM=

# Optional managed database declaration (Render will create a Postgres instance if you use the UI).
# Render's render.yaml supports 'databases' entries but details/fields may vary â€” create DB in the UI
# and copy values into envVars above. Example below is illustrative only.
databases:
  - name: phorn-bus-db
    engine: postgres
    plan: starter
    region: oregon

# End of template. Replace placeholders and either upload this manifest to Render or use the UI
# to create a Web Service (Docker) and a Postgres managed DB. Set env vars in the service settings.
